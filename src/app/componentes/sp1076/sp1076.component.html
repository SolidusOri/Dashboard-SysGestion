<h2 class="animated fast fadeIn">
    Consuta sp 1076
</h2>

<!-- filtros -->
<form (ngSubmit)="cargarGrafico()" #forma="ngForm">
    <div class="form-row">
      <div class="col form-group">
        <label class="my-1 mr-2" for="inicio">Inicio</label>
        <input [(ngModel)]="inicio" name="inicio" type="text" class="form-control form-control-sm" id="inicio" placeholder="Inicio" bsDatepicker required>
        <label class="my-1 mr-2" for="vendedor">Vendedor</label>
        <select class="form-control form-control-sm" id="vendedor">
          <option *ngFor="let i of vendedores" [value]="i.ve_codven">{{i.ve_codven + " - " + i.ve_nomven | titlecase}}</option>
        </select>
      </div>
      <div class="col">
          <label class="my-1 mr-2" for="termino">Termino</label>
          <input [(ngModel)]="termino" name="termino" type="text" class="form-control form-control-sm" id="termino" placeholder="Termino" bsDatepicker required>
          <label class="my-1 mr-2" for="local">Local</label>
          <select class="form-control form-control-sm" id="local">
            <option *ngFor="let i of locales;" [value]="i.lc_codloc">{{i.lc_codloc + " - " + i.lc_nomloc | titlecase }}</option>
          </select>
      </div>
    </div>
    <button [disabled]="!forma.valid || cargandoDatos" type="submit" class="mt-3 btn btn-outline-primary">
      <span *ngIf="!cargandoDatos">Buscar</span>
      <span *ngIf="cargandoDatos"><i class="fas fa-spinner fa-spin mr-2"></i>Cargando Datos</span>
    </button>
    


    <h2 class="mt-4">
      Resultado por Comparar
    </h2>
    <div class="row">
      <div class="col">
        <div class="alert alert-info" role="alert" *ngIf="dataSP.length > 0">
          <b>{{ mesPorComparar.TM_MESPER | getMes}} / {{mesPorComparar.TM_ANOPER }}</b>
          Venta: <b>{{ mesPorComparar.TM_MTOVTA | monedaChilena}} </b>
          Credito: <b>{{ mesPorComparar.TM_MTOCRE | monedaChilena}}</b>
          Saldo: <b>{{ mesPorComparar.TM_MTOVTA - mesPorComparar.TM_MTOCRE | monedaChilena}}</b>
        </div>
      </div>
    </div>
  
</form>


<hr>

<div class="lead animated fadeIn">
  <div style="display: block">
    <canvas baseChart
      [(datasets)]="barChartData"
      [(labels)]="barChartLabels"
      [(options)]="barChartOptions"
      [(legend)]="barChartLegend"
      [(chartType)]="barChartType">
    </canvas>
  </div>
</div>



<div class="mt-4 mb-2">
  <h2 class="mb-1">
    Tabla
  </h2>
  <button type="button" class="btn btn-outline-primary mr-1" [disabled]="tamano === 40" (click)="tamano = tamano + 5">
    <i class="fa fa-plus"></i>
  </button>
  <button type="button" class="btn btn-outline-primary" [disabled]="tamano === 5" (click)="tamano = tamano - 5">
    <i class="fa fa-minus"></i>
  </button>
</div>

<div class="lead animated fadeIn">
    <table class="table table-sm table-hover table-bordered">
        <thead class="thead-dark">
          <tr>
            <th scope="col" class=""><span class="ml-2">Mes</span></th>
            <th scope="col"><span class="ml-2">AÃ±o</span></th>
            <th scope="col" class="text-right"><span class="mr-2">Venta</span></th>
            <th scope="col" class="text-right"><span class="mr-2">Credito</span></th>
            <th scope="col" class="text-right"><span class="mr-2">Saldo</span></th>
          </tr>
        </thead>
        <tbody [style.fontSize.px]="tamano">
          <tr *ngFor="let i of dataSP">
            <th><span class="ml-2">{{i.TM_MESPER | getMes}}</span></th> 
            <td><span class="ml-2">{{i.TM_ANOPER}}</span></td>
            <td class="text-right" *ngIf="i.TM_MTOVTA > 0"><span class="mr-2">{{i.TM_MTOVTA | monedaChilena}}</span></td>
            <td *ngIf="i.TM_MTOVTA <= 0"></td>
            <td class="text-right" *ngIf="i.TM_MTOCRE > 0"><span class="mr-2">{{i.TM_MTOCRE | monedaChilena}}</span></td>
            <td *ngIf="i.TM_MTOCRE <= 0"></td>
            <td class="text-right"><span class="mr-2">{{i.TM_MTOVTA - i.TM_MTOCRE | monedaChilena}}</span></td>
          </tr>
        </tbody>
      </table>
</div>


